@(comment: gitbucket.core.model.CommitComment,
  hasWritePermission: Boolean,
  repository: gitbucket.core.service.RepositoryService.RepositoryInfo,
  latestCommitId: Option[String] = None)(implicit context: gitbucket.core.controller.Context)
@import context._
@import gitbucket.core._
@import gitbucket.core.view.helpers._
<div class="@if(comment.fileName.isDefined && (!latestCommitId.isDefined || latestCommitId.get == comment.commitId)){inline-comment}"
    id="discussion_r@comment.commentId"
    @if(comment.fileName.isDefined){filename="@comment.fileName.get"}
    @if(comment.newLine.isDefined){newline="@comment.newLine.get"}
    @if(comment.oldLine.isDefined){oldline="@comment.oldLine.get"}>
  <div class="issue-avatar-image">@avatar(comment.commentedUserName, 48)</div>
  <div class="box commit-comment-box commit-comment-@comment.commentId">
    <div class="box-header">
      @user(comment.commentedUserName, styleClass="username strong")
        <span class="muted">
          添加备注于
          @if(comment.issueId.isDefined){
            此合并申请
          } else {
            @if(comment.fileName.isDefined){
              @comment.fileName.get
            }
            <a href="@path/@repository.owner/@repository.name/commit/@comment.commitId">@comment.commitId.substring(0, 7)</a>
          }
          @helper.html.datetimeago(comment.registeredDate)
        </span>
      <span class="pull-right">
        @if(hasWritePermission || loginAccount.map(_.userName == comment.commentedUserName).getOrElse(false)){
          <a href="#" data-comment-id="@comment.commentId"><i class="octicon octicon-pencil"></i></a>&nbsp;
          <a href="#" data-comment-id="@comment.commentId"><i class="octicon octicon-x"></i></a>
        }
      </span>
    </div>
    <div class="box-content-bottom issue-content commit-commentContent-@comment.commentId markdown-body">
      @markdown(comment.content, repository, false, true, true, hasWritePermission)
    </div>
  </div>
</div>
